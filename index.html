<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="./styles.css" />
  <title>Frontend Mentor | Time tracking dashboard--style</title>
</head>
<body>
  <main>
    <section class="profile card--style">
      <div class="profile__header--container">
        <div class="profile__image--container">
          <img class="profile__image--style" src="images/image-jeremy.png" alt="young african american male" />
        </div>
        <div class="profile__name--container">
          <p class="name__top--style">Report for</p>
          <h1 class="name__bottom--style">Jeremy Robson</h1>
        </div>
      </div>
      <div class="profile__time--container">
        <ul class="time--container">
          <li><button class="time__button-style" type="button" onclick="updateDashboards('daily')">Daily</button></li>
          <li><button class="time__button-style time--highlight" type="button" onclick="updateDashboards('weekly')">Weekly</button></li>
          <li><button class="time__button-style" type="button" onclick="updateDashboards('monthly')">Monthly</button></li>
        </ul>
      </div>
    </section>
    <section class="work dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Work</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="work-current" class="hours">32hrs</p>
          <p id="work-previous">Last Week  - 36hrs</p>
        </div>
      </div>
    </section>
    <section class="play dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Play</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="play-current" class="hours">10hrs</p>
          <p id="play-previous">Last Week  - 8hrs</p>
        </div>
      </div>
    </section>
    <section class="study dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Study</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="study-current" class="hours">4hrs</p>
          <p id="study-previous">Last Week  - 7hrs</p>
        </div>
      </div>
    </section>
    <section class="exercise dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Exercise</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="exercise-current" class="hours">4hrs</p>
          <p id="exercise-previous">Last Week  - 5hrs</p>
        </div>
      </div>
    </section>
    <section class="social dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Social</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="social-current" class="hours">5hrs</p>
          <p id="social-previous">Last Week  - 10hrs</p>
        </div>
      </div>
    </section>
    <section class="selfCare dashboard--style card--style">
      <div class="dashboard__inner--container">
        <div class="dashboard__top--container">
          <h2>Self Care</h2>
          <img class="dashboard__image--style" src="images/icon-ellipsis.svg" alt="three dots" />
        </div>
        <div class="dashboard__bottom--container">
          <p id="selfcare-current" class="hours">2hrs</p>
          <p id="selfcare-previous">Last Week  - 2hrs</p>
        </div>
      </div>
    </section>
  </main>
</body>
<script>
  let currentTimeFrame = "weekly"
  let appData = [];
  
  const updateDashboards = (timeframe) => {
    // Update the format button's styling
    highlightTimeFrame(timeframe); 

    // Update the data in the UI
    if(appData.length > 0){
      updatePage(appData);
    }else{
      updateData(timeframe);
    }
  }
  
  const updateData = (timeframe) => {
    fetch('./data.json')
    .then(response => response.json())
    .then(data => {distillData(data, timeframe)});
  }
  
  //Within each object, I just want the title and timeframes's property that matches
  const distillData = (data, timeframe) => {
    let newDashboardDataPoint = {};
    let newDashboardArray = [];
    data.forEach(dataStream => {
      newDashboardDataPoint.title = dataStream.title;
      newDashboardDataPoint.timeslot = dataStream.timeframes[timeframe];
      newDashboardArray.push(newDashboardDataPoint);
      newDashboardDataPoint = {};
    });
    
    appData = newDashboardArray; // saves the data for later
    updatePage(newDashboardArray, timeframe);    
  }

  // function that update each dashboards two different time data points with format "data hrs"
  const updatePage = (data) => {
    data.forEach((category)=> {
      if(category.title === 'Work'){
        document.getElementById('work-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('work-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
      if(category.title === 'Play'){
        document.getElementById('play-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('play-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
      if(category.title === 'Study'){
        document.getElementById('study-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('study-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
      if(category.title === 'Exercise'){
        document.getElementById('exercise-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('exercise-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
      if(category.title === 'Social'){
        document.getElementById('social-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('social-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
      if(category.title === 'Self Care'){
        document.getElementById('selfcare-current').innerHTML = `${category.timeslot["current"]}hrs`;
        document.getElementById('selfcare-previous').innerHTML = `Last Week = ${category.timeslot["previous"]}hrs`;
        return;
      }
    })
    
  }

  // function that highlight the current time frame button
  const highlightTimeFrame = (timeframe) => {
    const timeframes = document.getElementsByClassName("time__button-style");
    Array.from(timeframes).forEach(function (format){
      if((format.innerHTML).toLowerCase() === timeframe){
        format.classList.add("time--highlight");
      }else {
        format.classList.remove("time--highlight");
      }
    });
  }
</script>
</html>